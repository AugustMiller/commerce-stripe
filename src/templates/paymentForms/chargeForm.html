{% set paymentFormNamespace = handle|commercePaymentFormNamespace %}
<div class="stripe-charge-form"
  data-payment-form-namespace="{{ paymentFormNamespace }}"
  data-publishablekey="{{ parseEnv(gateway.publishableKey) }}"
  data-enforce3dsecure="{{ gateway.enforce3dSecure ?? '' }}"
>

  {% namespace paymentFormNamespace %}
    {% include 'commerce/_components/gateways/_creditCardFields' %}
  {% endnamespace %}

  <div class="card-errors" role="alert"></div>
  {% if billingAddress is defined %}
    <div class="stripe-address hidden">
      <input type="hidden" name="stripe-line1" value="{{ billingAddress.address1 }}" />
      <input type="hidden" name="stripe-postal-code" value="{{ billingAddress.zipCode }}" />
      <input type="hidden" name="stripe-city" value="{{ billingAddress.city }}" />
      {% if billingAddress.country is not null %}
        <input type="hidden" name="stripe-country" value="{{ billingAddress.country.iso }}" />
      {% endif %}
      <input type="hidden" name="stripe-state" value="{{ billingAddress.state }}" />
    </div>
  {% endif %}
</div>
